<div class="container-fluid">
  <div class="row justify-content-center">
    <div class="table-responsive mt-5">
      <table class="table table-hover">
        <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Название</th>
          <th scope="col">Автор</th>
          <th scope="col">Год издательства</th>
          <th scope="col">Дата добавления</th>
          <th scope="col">Отзыв</th>
          <th scope="col">Действия</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let book of books">
          <th scope="row">{{ book.id }}</th>
          <td>
            {{ editing === book.id ? null : book.title }}
            <input type="text" *ngIf="editing === book.id" [(ngModel)]="editingBook.title">
          </td>
          <td>
            {{ editing === book.id ? null : book.author }}
            <input type="text" *ngIf="editing === book.id" [(ngModel)]="editingBook.author">
          </td>
          <td>
            {{ editing === book.id ? null : book.year }}
            <input type="number" *ngIf="editing === book.id" [(ngModel)]="editingBook.year">
          </td>
          <td>
            {{ editing === book.id ? null : book.addDate }}
            <input type="text" *ngIf="editing === book.id" [(ngModel)]="editingBook.addDate">
          </td>
          <td>
            {{ editing === book.id ? null : book.comment }}
            <input type="text" *ngIf="editing === book.id" [(ngModel)]="editingBook.comment">
          </td>
          <td>
            <ng-container *ngIf="editing === book.id">
              <button
                type="button"
                class="btn btn-success"
                [disabled]="!updateValidation()"
                (click)="updateBook()">Ok</button>
              <button
                type="button"
                class="btn btn-danger ml-2"
                (click)="editing = null">Back</button>
            </ng-container>
            <ng-container *ngIf="editing !== book.id">
              <button
                type="button"
                class="btn btn-success"
                (click)="edit(book.id)">Edit</button>
              <button
                type="button"
                class="btn btn-danger ml-2"
                (click)="removeBook(book.id)">X</button>
            </ng-container>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!--<ng-container *ngIf="editing; else noEditing">-->
  <!--<ng-template *ngTemplateOutlet="edit; context: book"></ng-template>-->
<!--</ng-container>-->

<!--<ng-template #edit>-->
  <!--<button type="button" class="btn btn-success">Ok</button>-->
  <!--<button type="button" class="btn btn-danger ml-2" (click)="editing = false">Back</button>-->
<!--</ng-template>-->

<!--<ng-template #noEditing>-->
  <!--<button type="button" class="btn btn-success" (click)="editing = true">Edit</button>-->
  <!--<button type="button" class="btn btn-danger ml-2" (click)="removeBook(book.id)">X</button>-->
<!--</ng-template>-->
